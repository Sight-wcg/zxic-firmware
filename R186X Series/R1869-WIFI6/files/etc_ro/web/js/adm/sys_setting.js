define(["jquery","knockout","config/config","service","underscore"],function(f,d,c,a,b){var h=b.map(c.sntpTimeSetMode,function(i){return new Option(i.name,i.value)});function e(){var i=this;i.fastbootSupport=c.FAST_BOOT_SUPPORT;i.turnOffSupport=c.TURN_OFF_SUPPORT;i.hasUssd=c.HAS_USSD;i.SNTPSupport=c.HAS_SNTP;i.hasUpdateCheck=c.HAS_UPDATE_CHECK;i.hasDdns=c.DDNS_SUPPORT;var j=false;if(c.HAS_PARENTAL_CONTROL){j=a.checkCurrentUserInChildGroup().result}i.currentUserInChildGroup=d.observable(j);i.restore=function(){showConfirm("restore_confirm",function(){showLoading("restoring");a.restoreFactorySettings({},function(k){if(k&&k.result=="success"){successOverlay()}else{errorOverlay()}},function(k){if(isErrorObject(k)&&k.errorType=="no_auth"){errorOverlay()}})})};i.restart=function(){showConfirm("restart_confirm",function(){restartDevice(a)})};i.turnoff=function(){showConfirm("turnoff_confirm",function(){showLoading("turnoff");a.turnOffDevice({},function(k){if(k&&k.result=="success"){successOverlay()}else{errorOverlay()}},f.noop)})};i.pageSwitchPC=function(){showConfirm("confirm_page_switch",function(){window.location="index.html"})};i.logout_mobile=function(){showConfirm("confirm_logout",function(){manualLogout=true;a.logout({},function(){if(a.pageIsMobile()){window.location="index_mobile.html"}else{window.location="index.html"}})})}}function g(){var j=new e();var i=f("#container")[0];d.cleanNode(i);d.applyBindings(j,i)}return{init:g}});