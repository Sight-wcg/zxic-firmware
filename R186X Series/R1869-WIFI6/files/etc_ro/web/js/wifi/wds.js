define(["knockout","service","jquery","config/config","underscore"],function(i,e,d,b,f){var a=f.map(b.wdsModes,function(j){return new Option(j.name,j.value)});var g=f.map(b.AUTH_MODES,function(j){return new Option(j.name,j.value)});function c(){var l=e.getWdsInfo();var j=this;j.wdsModes=i.observableArray(a);j.currentMode=i.observable(l.currentMode);j.showDivForSSID=i.observable();m();j.changeWdsMode=function(){m()};j.wdsSSID=i.observable(l.wdsSSID);j.modes=i.observable(g);j.selectedMode=i.observable(l.wdsAuthMode);j.passPhrase=i.observable(l.wdsWPAPSK1);function k(){var n={goformId:"WIFI_WDS_SET",wifi_wds_mode:j.currentMode(),wifi_wds_ssid:j.wdsSSID(),wifi_wds_AuthMode:j.selectedMode(),wifi_wds_EncrypType:"NONE",wifi_wds_WPAPSK1:j.passPhrase()};e.setWDS(n,function(o){if(o.result=="success"){successOverlay()}else{errorOverlay()}})}j.apply=function(){var n=e.getWpsInfo();if(n.wpsFlag=="1"){showAlert("wps_on_info");return true}if(j.currentMode()!="0"){showConfirm("enable_wds_confirm",function(){k()})}else{k()}};function m(){if(j.currentMode()=="0"){j.showDivForSSID(false)}else{j.showDivForSSID(true)}}}function h(){var j=d("#container");i.cleanNode(j[0]);var k=new c();i.applyBindings(k,j[0]);d("#wdsForm").validate({submitHandler:function(){k.apply()},rules:{repeater_ssid:"ssid",pass:"wifi_password_check"}})}return{init:h}});