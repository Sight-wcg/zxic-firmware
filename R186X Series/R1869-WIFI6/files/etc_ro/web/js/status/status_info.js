define(["knockout","service","jquery","config/config","underscore","status/statusBar","echarts"],function(m,f,d,b,j,i,c){var k={CONNECTED:1,DISCONNECTED:2,CONNECTING:3,DISCONNECTING:4};var n={WIRELESS:1,CABLE:2,AUTO:3};var g=null;var a=0;var h=window.language;function e(){var o=this;o.isCPE=b.PRODUCT_TYPE=="CPE";o.hasRj45=b.RJ45_SUPPORT;var q=f.getWifiBasic();if(b.WIFI_SUPPORT_QR_SWITCH){o.showQRCode=b.WIFI_SUPPORT_QR_CODE&&q.show_qrcode_flag}else{o.showQRCode=b.WIFI_SUPPORT_QR_CODE}o.qrcodeSrc="./pic/qrcode_ssid_wifikey.png?_="+d.now();if(o.hasRj45){var p=checkCableMode(f.getOpMode().blc_wan_mode);o.opCurMode=m.observable(p);o.isShowHomeConnect=m.observable(!p);o.showTraffic=m.observable(b.TRAFFIC_SUPPORT&&!p);o.isSupportQuicksetting=m.observable(b.HAS_QUICK_SETTING&&!p)}else{o.isShowHomeConnect=m.observable(true);o.showTraffic=m.observable(b.TRAFFIC_SUPPORT);o.isSupportQuicksetting=m.observable(b.HAS_QUICK_SETTING)}var s=f.getConnectionInfo();o.connectStatus=m.observable(s.connectStatus);o.canConnect=m.observable(false);o.cStatus=m.computed(function(){if(o.connectStatus().indexOf("_connected")!=-1){return k.CONNECTED}else{if(o.connectStatus().indexOf("_disconnecting")!=-1){return k.DISCONNECTING}else{if(o.connectStatus().indexOf("_connecting")!=-1){return k.CONNECTING}else{return k.DISCONNECTED}}}});o.current_Flux=m.observable(transUnit(0,false));o.connected_Time=m.observable(transSecond2Time(0));o.up_Speed=m.observable(transUnit(0,true));o.down_Speed=m.observable(transUnit(0,true));o.isLoggedIn=m.observable(false);o.enableFlag=m.observable(true);o.simSerialNumber=m.observable("");o.imei=m.observable("");o.imsi=m.observable("");o.ssid=m.observable("");o.hasWifi=b.HAS_WIFI;o.showMultiSsid=b.HAS_MULTI_SSID&&(q.multi_ssid_enable=="1");o.pageSwitchPC=function(){showConfirm("confirm_page_switch",function(){window.location="index.html"})};o.logout_mobile=function(){showConfirm("confirm_logout",function(){manualLogout=true;f.logout({},function(){if(f.pageIsMobile()){window.location="index_mobile.html"}else{window.location="index.html"}})})};var r=f.getDeviceInfo();o.sn=m.observable("");o.wifi_mac=m.observable("");o.pci=m.observable("");o.iccid=m.observable("");o.cellid=m.observable("");o.rsrq=m.observable("");o.band=m.observable("");o.rsrp=m.observable("");o.sinr=m.observable("");o.rssi=m.observable("");o.rscp=m.observable("");o.arfcn=m.observable("");o.snr=m.observable("");o.signal=m.observable("");o.max_access_num=m.observable("");o.m_ssid=m.observable("");o.m_max_access_num=m.observable("");o.wifi_long_mode="wifi_des_"+r.wifiRange;o.lanDomain=m.observable("");o.ipAddress=m.observable("");o.showMacAddress=b.SHOW_MAC_ADDRESS;o.macAddress=m.observable("");o.wanIpAddress=m.observable("");o.ipv6WanIpAddress=m.observable("");o.sw_version=verifyDeviceInfo(r.sw_version);o.hw_version=verifyDeviceInfo(r.hw_version);o.trafficAlertEnable=m.observable(false);o.trafficUsed=m.observable("");o.trafficLimited=m.observable("");o.wireDeviceNum=m.observable(f.getAttachedCableDevices().attachedDevices.length);o.wirelessDeviceNum=m.observable(f.getStatusInfo().wirelessDeviceNum);function t(u){var v=f.getDeviceInfo();u.simSerialNumber(verifyDeviceInfo(v.simSerialNumber));u.imei(verifyDeviceInfo(v.imei));u.imsi(verifyDeviceInfo(v.imsi));u.sn(verifyDeviceInfo(v.sn));u.wifi_mac(verifyDeviceInfo(v.wifi_mac));u.pci(verifyDeviceInfo(v.remo_pci));u.iccid(verifyDeviceInfo(v.iccid));u.cellid(verifyDeviceInfo(v.remo_cellid));u.rsrq(verifyDeviceInfo(v.remo_rsrq));u.band(verifyDeviceInfo(v.remo_band));u.rsrp(verifyDeviceInfo(v.remo_rsrp));u.sinr(verifyDeviceInfo(v.remo_sinr));u.rssi(verifyDeviceInfo(v.remo_rssi));u.rscp(verifyDeviceInfo(v.remo_rscp));u.arfcn(verifyDeviceInfo(v.remo_arfcn));u.snr(verifyDeviceInfo(v.snr));u.signal(signalFormat(v.signal));u.ssid(verifyDeviceInfo(v.ssid));u.max_access_num(verifyDeviceInfo(v.max_access_num));u.m_ssid(verifyDeviceInfo(v.m_ssid));u.m_max_access_num(verifyDeviceInfo(v.m_max_access_num));u.lanDomain(verifyDeviceInfo(v.lanDomain));u.ipAddress(verifyDeviceInfo(v.ipAddress));u.macAddress(verifyDeviceInfo(v.macAddress))}t(o);addInterval(function(){t(o)},2000)}function l(){a=0;var o=d("#container")[0];m.cleanNode(o);var p=new e();m.applyBindings(p,o)}return{init:l}});