define(function(){var d=10+getRandomInt(30);var m=50+getRandomInt(30);var c=e();var h=getRandomInt(100);var j=["0","1","2","3"];var b=[];function o(){var w="abcdefjhigklmnopqrstuvwxyz";var v=100-getRandomInt(50);var y="";for(var u=0;u<v;u++){var s=3+getRandomInt(5);var x="";for(var t=0;t<s;t++){x+=w.charAt(getRandomInt(w.length-1))}y+=x+(v/10==0?".":"")+" "}return encodeMessage(y)}function e(){var u=[];for(var t=0;t<d;t++){var s=["135","137","138"][getRandomInt(2)]+(100000000-getRandomInt(100000000));if($.inArray(s,u)!=-1){t--}else{u.push(s)}}return u}function n(u){var x=new Date();var s=getRandomInt(d-1);var t=u?["0","0","1","2","2"][getRandomInt(4)]:"1";var v=!!u?c[s]:(getRandomInt(1)==0?c[s]:getRandomInt(1000000000)+20000000000+"");var w=[h+b.length,"0;0;0","nv",t,v,"1","2","3","1;2;3","3","9632","","2","0",o(),"","0",x.getFullYear().toString().substring(2,4),(x.getMonth()+1),x.getDate(),x.getHours(),x.getMinutes(),x.getSeconds(),"",""];b.push(w);return w}var g=false;function l(s){if(!g){for(var t=0;t<m;t++){n(s)}g=true}return r(n(s))}function i(u){var t=new Date();var s=[h+b.length,"0;0;0","nv",u.tag,u.number,"1","2","3","1;2;3","3","9632","","2","0",u.content,"","0",t.getFullYear(),(t.getMonth()+1),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),"",u.groupId];b.push(s);return r(s)}function k(s){b=$.grep(b,function(u,t){return $.inArray(u[0]+"",s)==-1})}function a(){b=[];g=true}function f(t){var s=t.msg_id.split(";");$.map(b,function(u){if($.inArray(u[0]+"",s)!=-1){u[3]="0"}})}function q(){return c}function r(t){var s={id:t[0],Mem_Store:t[2],Tag:t[3],Number:t[4],Cc_Total:t[7],Content:t[14],Year:t[17],Month:t[18],Day:t[19],Hour:t[20],Minute:t[21],Second:t[22],groupId:t[24]};return s}function p(){if(!g&&b.length==0){for(var s=0;s<m;s++){n("inner")}g=true}var t=[];for(var s=0;s<b.length;s++){t.push(r(b[s]))}return t}return{getConvertedSmsData:p,getPhoneNumbers:q,addNewSms:l,storeSms:i,getSmsMaxId:function(){return h+b.length},deleteSms:k,setSmsRead:f,deleteAllSmsData:a}});